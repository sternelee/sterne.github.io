<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="sogou_site_verification" content="WEhegz1Bts"/>
<meta name="360-site-verification" content="ab30d6f9900b55bcfa635dbcf869b683" />





  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.3"/>


    <meta name="description" content="喜欢英文吉他的程序猿" />



  <meta name="keywords" content="JS,ReactJS,WebAPP,h5,ideas," />



  <link rel="alternate" href="/atom.xml" title="STERNE" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    analytics: {
      google: ''
    },
    sidebar: 'always'
  };
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?3d7b971cdcecc20a9a4fede5c34e4b52";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <title> JWT在前后端分离中的应用与实践 // STERNE </title>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">STERNE</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            <i class="menu-item-icon icon-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            <i class="menu-item-icon icon-about"></i> <br />
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            <i class="menu-item-icon icon-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            <i class="menu-item-icon icon-tags"></i> <br />
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html">
            <i class="menu-item-icon icon-commonweal"></i> <br />
            公益404
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
<form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'bExB38zoBkxmtz8PsFQ_','2.0.0');
</script>

<div class="site-search-toggle"></div>
    </div>
  
</div>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              JWT在前后端分离中的应用与实践
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-06-12
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/categories/笔记/">笔记</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/06/12/jwtzai-qian-hou-duan-fen-chi-zhong-de-ying-yong-yu-shi-jian/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/12/jwtzai-qian-hou-duan-fen-chi-zhong-de-ying-yong-yu-shi-jian/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <p>本文主要介绍JWT（<a href="http://jwt.io/" target="_blank" rel="external">JSON Web Token</a>）授权机制在前后端分离中的应用与实践，包括以下三部分：<br>1.JWT原理介绍<br>2.JWT的安全性<br>3.React.js+Flux架构下的实践（<a href="https://github.com/rainyear/react-jwt-example.git" target="_blank" rel="external">React-jwt example</a>）<br><a id="more"></a></p>
<h6 id="0__u5173_u4E8E_u524D_u540E_u7AEF_u5206_u79BB"><a href="#0__u5173_u4E8E_u524D_u540E_u7AEF_u5206_u79BB" class="headerlink" title="0 关于前后端分离"></a>0 关于前后端分离</h6><p>前后端分离是一个很有趣的议题，它不仅仅是指前后端工程师之间的相互独立的合作分工方式，更是前后端之间开发模式与交互模式的模块化、解耦化。计算机世界的经验告诉我们，对于复杂的事物，模块化总是好的，无论是后端API开发中越来越成为规范的<a href="http://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="external">RESTful API</a>风格，还是Web前端越来越多的模板、框架（参见<a href="http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="external">MVC，MVP 和 MVVM 的图示</a>），包括移动应用中前后端天然分离的特质，都证实了前后端分离的重要性与必要性（更生动的细节与实例说明可以参看赫门分享的主题<a href="http://2014.jsconf.cn/slides/herman-taobaoweb/#/" target="_blank" rel="external">淘宝前后端分离实践</a>）。</p>
<p>实现前后端分离，对于后端开发人员来说是一件很幸福的事情，因为不需要再考虑怎样在HTML中套入数据，只关心数据逻辑的处理；而前端则需要承担接收数据之后界面呈现、用户交互、数据传递等所有任务。虽然这看起来加重了前端的工作量，但实际上有越来越多丰富多样的前端框架可供选择，这让前端开发变得越来越结构化、系统化，前端工程师也不再只是“套版的”。</p>
<p>在所有前端框架中，Facebook推出的<a href="http://facebook.github.io/react" target="_blank" rel="external">React</a>无疑是当下最热门（之一），然而React只负责界面渲染层面，相当于MVC中的V（View），因此只靠React无法完成一个完整的单页应用（<a href="http://en.wikipedia.org/wiki/Single-page_application" target="_blank" rel="external">Single Page App</a>）。Facebook另外推出与之配套的<a href="http://facebook.github.io/flux" target="_blank" rel="external">Flux</a>架构，主要为了避免Angular.js之类MVC的架构模式，规避数据双向绑定而采用单向绑定的数据传递方式。实际上React无论是学习还是使用都是非常简单的，而Flux则需要花更多时间去理解消化，本文第3部分我采用Flux架构的一种实现<a href="https://github.com/spoike/refluxjs" target="_blank" rel="external">Reflux.js</a>，做了一个基于JWT授权机制的登入、登出的例子，顺便介绍Flux架构的细节。</p>
<p>######1 JWT 介绍及其原理<br>JWT是我之前做Android应用的时候了解到的一种用户授权机制，虽然原生的移动手机应用与基于浏览器的Web应用之间存在很多差异，但很多情况下后端往往还是沿用已有的架构跟代码，所以用户授权往往还是采用Cookie+Session的方式，也就是需要原生应用中模拟浏览器对Cookie的操作。</p>
<p>Cookie+Session的存在主要是为了解决HTTP这一无状态协议下服务器如何识别用户的问题，其原理就是在用户登录通过验证后，服务端将数据加密后保存到客户端浏览器的Cookie中，同时服务器保留相对应的Session（文件或DB）。用户之后发起的请求都会携带Cookie信息，服务端需要根据Cookie寻回对应的Session，从而完成验证，确认这是之前登陆过的用户。其工作原理如下图所示：</p>
<p><img src="http://7xiijd.com1.z0.glb.clouddn.com/cookie_sessions.png" alt="Cookie+Session"></p>
<p>JWT是<a href="https://auth0.com/" target="_blank" rel="external">Auth0</a>提出的通过对JSON进行加密签名来实现授权验证的方案，编码之后的JWT看起来是这样的一串字符：</p>
<p><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ</code></p>
<p>由.分为三段，通过解码可以得到：</p>
<p><pre><code>// 1. Headers<br>// 包括类别（typ）、加密算法（alg）；<br>{<br>  “alg”: “HS256”,<br>  “typ”: “JWT”<br>}<br>// 2. Claims<br>// 包括需要传递的用户信息；<br>{<br>  “sub”: “1234567890”,<br>  “name”: “John Doe”,<br>  “admin”: true<br>}<br>// 3. Signature<br>// 根据alg算法与私有秘钥进行加密得到的签名字串；<br>// 这一段是最重要的敏感信息，只能在服务端解密；<br>HMACSHA256(<br>    base64UrlEncode(header) + “.” +<br>    base64UrlEncode(payload),<br>    SECREATE_KEY<br>)</code></pre><br>在使用过程中，服务端通过用户登录验证之后，将Header+Claim信息加密后得到第三段签名，然后将签名返回给客户端，在后续请求中，服务端只需要对用户请求中包含的JWT进行解码，即可验证是否可以授权用户获取相应信息，其原理如下图所示：</p>
<p><img src="http://7xiijd.com1.z0.glb.clouddn.com/json_web_token.png" alt="JWT"></p>
<p>通过比较可以看出，使用JWT可以省去服务端读取Session的步骤，这样更符合RESTful的规范。但是对于客户端（或App端）来说，为了保存用户授权信息，仍然需要通过Cookie或类似的机制进行本地保存。因此JWT是用来取代服务端的Session而非客户端Cookie的方案，当然对于客户端本地存储，HTML5提供了Cookie之外更多的解决方案（localStorage/sessionStorage），究竟采用哪种存储方式，其实从Js操作上来看没有本质上的差异，不同的选择更多是出于安全性的考虑。</p>
<h6 id="2_JWT__u5B89_u5168_u6027"><a href="#2_JWT__u5B89_u5168_u6027" class="headerlink" title="2 JWT 安全性"></a>2 JWT 安全性</h6><p>用户授权这样敏感的信息，安全性当然是首先需要考虑的因素。这里主要讨论在使用JWT时如何防止XSS和XSRF两种攻击。</p>
<p>XSS是Web中最常见的一种漏洞（我们的**学报官网就存在这个漏洞这件事我就不说了=.=），其主要原因是对用户输入信息不加过滤，导致用户（被误导）恶意输入的Js代码在访问该网页时被执行，而Js可以读取当前网站域名下保存的Cookie信息。针对这种攻击，无论是Cookie还是localStorage中的信息都有可能被窃取，但防止XSS也相对简单一些，对用户输入的所有信息进行过滤即可。另外，现在越来越多的CDN服务，让我们可以节省服务器流量，但同时也有可能引入不安全的Js脚本，例如前段时间Github被Great Cannon轰击的案例，则需要提高对某度之类服务的警惕。</p>
<p>另外一种更加棘手的XSRF漏洞主要利用Cookie是按照域名存储，同时访问某域名时浏览器会自动携带该域名所保存的Cookie信息这一特征。如果执意要将JWT存储在Cookie中，服务端则需要额外验证请求来源，或者在提交表单中加入随机签名并在处理表单时进行验证。</p>
<p>我在后面的实例中采用将JWT保存在localStorage中的方案，请求时将JWT放入Request Header中的Authorization位。对JWT安全性问题想要了解更多可以参考下面几篇文章：</p>
<p>1.<a href="https://stormpath.com/blog/where-to-store-your-jwts-cookies-vs-html5-web-storage/" target="_blank" rel="external">Where to Store Your JWTs - Cookies vs HTML5 Web Storage</a><br>2.<a href="https://stormpath.com/blog/jwt-the-right-way/" target="_blank" rel="external">Use JWT the Right Way!</a><br>3.<a href="https://auth0.com/blog/2014/01/27/ten-things-you-should-know-about-tokens-and-cookies/" target="_blank" rel="external">10 Things You Should Know about Tokens</a><br>4.<a href="http://stackoverflow.com/questions/27067251/where-to-store-jwt-in-browser-how-to-protect-against-csrf" target="_blank" rel="external">Where to store JWT in browser? How to protect against CSRF?</a></p>
<h6 id="3_React-jwt_Example"><a href="#3_React-jwt_Example" class="headerlink" title="3 React-jwt Example"></a>3 React-jwt Example</h6><p>本节源码可见<a href="https://github.com/rainyear/react-jwt-example" target="_blank" rel="external">Github: react-jwt-example</a>。</p>
<p>前面提到的React.js框架学习成本其实非常低，只要跟着官方教程走一遍，搞清楚props、states、virtual DOM几个概念，就可以开始用了。但是只有View层什么都做不了，Facebook推出配套的Flux架构，一开始看到下面这张架构图，当时我就懵逼了。</p>
<p><img src="http://7xiijd.com1.z0.glb.clouddn.com/flux-diagram-white-background.png" alt="Flux diagram"></p>
<p>好在Flux只是一种理论架构，虽然官方也提供了实现方案，但是我更倾向于Reflux.js的实现方式，如下图所示：</p>
<p><img src="http://7xiijd.com1.z0.glb.clouddn.com/reflux.png" alt="Reflux.js"></p>
<p>其中View Components即视图层由React负责，Stores用于存储数据，Actions则用于监听所有动作，所有数据的传递都是单向绑定的，在分割不同模块时，可以清楚地看到数据的流动方向。</p>
<p>我尝试写了一个简单的登录、登出以及获取用户个人数据的例子，除了Reflux之外，还用到如下模块：</p>
<p>1.<a href="https://github.com/rackt/react-router" target="_blank" rel="external">react-router</a>: SPA路由；<br>2.<a href="http://react-bootstrap.github.io/" target="_blank" rel="external">react-bootstrap</a>: React化的，UI样式；<br>3.<a href="https://www.npmjs.com/package/reqwest" target="_blank" rel="external">reqwest</a>: Ajax请求；<br>4.<a href="https://www.npmjs.com/package/jwt-decode" target="_blank" rel="external">jwt-decode</a>: 客户端的JWT解码；<br>另外服务端API采用<a href="https://gin-gonic.github.io/gin" target="_blank" rel="external">Go gin</a>框架，依赖于<a href="http://github.com/dgrijalva/jwt-go" target="_blank" rel="external">jwt-go</a>。代码目录结构如下：</p>
<p><pre><code>tree -I ‘node_modules|.git’<br>.<br>├── README.md<br>├── gulpfile.js<br>├── index.html<br>├── package.json<br>├── scripts<br>│   ├── actions<br>│   │   └── actions.js<br>│   ├── app.js<br>│   ├── build<br>│   │   └── dist.js<br>│   ├── components<br>│   │   └── HelloWorld.js<br>│   ├── stores<br>│   │   ├── loginStore.js<br>│   │   └── userStore.js<br>│   └── views<br>│       ├── home.js<br>│       ├── login.js<br>│       └── profile.js<br>└── server.go</code></pre><br>完整的页面放在view中，可复用的组件放在components，用户的动作包括login、logout以及getBalance，因此需要创建相应的action来监听这些动作：</p>
<p><pre><code>// actions.js<br>var actions = Reflux.createActions({<br>  “login”: {},<br>  “updateProfile”: {}, // login成功更新用户数据<br>  “loginError”: {}, // login失败错误信息<br>  “logout”: {},<br>  “getBalance”: {asyncResult: true}<br>});</code></pre></p>
<p>actions.login.listen(function(data){});  <br>用户点击view中的Submit Button时，将表单信息提交给login action：</p>
<p><pre><code>// views/login.js<br>var Login = React.createClass({<br>  …<br>  login: function (e) {<br>    e.preventDefault();<br>    actions.login({<br>      name: this.refs.name.getValue(),<br>      pass: this.refs.pass.getValue(),<br>    }),<br>  …<br>});<br>// actions.js<br>var req    = require(‘reqwest’);<br>actions.login.listen(function(data){<br>  req({<br>    url: HOST+”/user/token”,<br>    method: “post”,<br>    data: JSON.stringify(data),<br>    type: ‘json’,<br>    contentType: ‘application/json’,<br>    headers: {‘X-Requested-With’: ‘XMLHttpRequest’},<br>    success: function (resp) {<br>      if(resp.code == 200){<br>        actions.updateProfile(resp.jwt)<br>      }else{<br>        actions.updateProfile(resp.msg)<br>      }<br>    },<br>  })<br>});</code></pre><br>根据API返回结果，将再次触发updateProfile或updateProfile action，而分别由userStore和loginStore接收：</p>
<p><pre><code>// stores/userStore.js<br>var userStore = Reflux.createStore({<br>  listenables: actions, // 声明userStore所监听的action<br>  updateProfile: function(jwt){<br>    // 注册监听actions.updateProfile<br>    localStorage.setItem(‘jwt’, jwt);<br>    this.user = jwt_decode(jwt);<br>    this.user.logd = true;<br>    this.trigger(this.user);<br>  },<br>})<br>// stores/loginStore.js<br>var loginStore = Reflux.createStore({<br>  listenables: actions,<br>  loginError: function(msg){<br>    this.trigger(msg);<br>  },<br>});</code></pre><br>store接收action数据后，通过<strong>this.trigger(msg)</strong>将处理过后的数据重新传递会view：</p>
<p><pre><code>var Login = React.createClass({<br>  mixins : [<br>    Router.Navigation,<br>    Reflux.listenTo(userStore, ‘onLoginSucc’),<br>    Reflux.listenTo(loginStore, ‘onLoginErr’)<br>  ],<br>  onLoginSucc: function(){<br>    // 登录成功，跳转回首页<br>    this.transitionTo(‘home’);<br>  },<br>  onLoginErr: function (msg) {<br>    // 登录失败，显示错误信息<br>    this.setState({<br>      errorMsg: msg,<br>    });<br>  },<br>  …<br>});</code></pre><br>至此，从用户点击登录到登录结果传回，整个流程数据在<strong>View-&gt;Action-&gt;Store-&gt;View</strong>中完成单向传递，这就是Flux架构的基本概念。</p>
<p>在完成登录后，API会将验证通过的JWT传回：</p>
<p><pre><code>// server.go<br>token := jwt.New(jwt.SigningMethodHS256)<br>// Headers<br>token.Header[“alg”] = “HS256”<br>token.Header[“typ”] = “JWT”<br>// Claims<br>token.Claims[“name”] = validUser.Name<br>token.Claims[“mail”] = validUser.Mail<br>token.Claims[“exp”] = time.Now().Add(time.Hour * 72).Unix()<br>tokenString, err := token.SignedString([]byte(mySigningKey))<br>if err != nil {<br>  c.JSON(200, gin.H{“code”: 500, “msg”: “Server error!”})<br>  return<br>}<br>c.JSON(200, gin.H{“code”: 200, “msg”: “OK”, “jwt”: tokenString})  </code></pre><br>当登录之后的用户在profile页面发起getBalance请求时，存储于本地的jwt将一起传递，我这里采用Header的方式传递，具体取决于API端的协议：</p>
<p><pre><code>// actions.js<br>actions.getBalance.listen(function(){<br>  var jwt = localStorage.getItem(‘jwt’);<br>  req({<br>    url: HOST+”/user/balance”,<br>    method: “post”,<br>    type: “json”,<br>    headers: {<br>      ‘Authorization’: “Bearer “+jwt,<br>    },<br>    success: function (resp) {<br>      if (resp.code == 200) {<br>        actions.updateProfile(resp.jwt);<br>      }else{<br>        actions.loginError(resp.msg);<br>      }<br>    }<br>  })<br>})</code></pre><br>而服务端面对任何需要验证权限的请求需要通过Token验证：</p>
<p><pre><code>//server.go<br>token, err := jwt.ParseFromRequest(c.Request, func(token *jwt.Token) (interface{}, error) {<br>  b := ([]byte(mySigningKey))<br>  return b, nil<br>})</code></pre><br>【<a href="http://blog.rainy.im/2015/06/10/react-jwt-pretty-good-practice/" target="_blank" rel="external">本文摘自</a>】</p>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JS/"> #JS </a>
          
            <a href="/tags/ReactJS/"> #ReactJS </a>
          
            <a href="/tags/WebAPP/"> #WebAPP </a>
          
            <a href="/tags/h5/"> #h5 </a>
          
            <a href="/tags/ideas/"> #ideas </a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/06/12/tong-guo-jsyu-ju-pan-duan-webwang-zhan-de-fang-wen-duan-shi-dian-nao-huan-shi-shou-ji/">通过JS语句判断WEB网站的访问端是电脑还是手机</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/06/10/see-you-again/">See You Again</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2015/06/12/jwtzai-qian-hou-duan-fen-chi-zhong-de-ying-yong-yu-shi-jian/"
     data-title="JWT在前后端分离中的应用与实践"
     data-content=""
     data-url="http://sternelee.github.io/2015/06/12/jwtzai-qian-hou-duan-fen-chi-zhong-de-ying-yong-yu-shi-jian/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>

    
      <div class="comments" id="comments">
        
          <div class="ds-thread" data-thread-key="2015/06/12/jwtzai-qian-hou-duan-fen-chi-zhong-de-ying-yong-yu-shi-jian/"
               data-title="JWT在前后端分离中的应用与实践" data-url="http://sternelee.github.io/2015/06/12/jwtzai-qian-hou-duan-fen-chi-zhong-de-ying-yong-yu-shi-jian/">
          </div>
        
      </div>
    
  </div>


        </div>

        
          <!-- 多说热评文章-->
          <p>热评文章</p>
          <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>
        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            本站概览
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="https://avatars2.githubusercontent.com/u/6971752?v=3&s=460" alt="Sterne Lee" />
          <p class="site-author-name">Sterne Lee</p>
        </div>
        <p class="site-description motion-element">喜欢英文吉他的程序猿</p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">53</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">21</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/sternelee" target="_blank">Github</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://weibo.com/leemetoo" target="_blank">新浪微博</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://sterne.cn" target="_blank">Ghost博客</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/SterneLee" target="_blank">Twitter</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://www.facebook.com/sterne.lee" target="_blank">Facebook</a>
            </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>
        
      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-6"><a class="nav-link" href="#0__u5173_u4E8E_u524D_u540E_u7AEF_u5206_u79BB"><span class="nav-number">1.</span> <span class="nav-text">0 关于前后端分离</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2_JWT__u5B89_u5168_u6027"><span class="nav-number">2.</span> <span class="nav-text">2 JWT 安全性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3_React-jwt_Example"><span class="nav-number">3.</span> <span class="nav-text">3 React-jwt Example</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        我被看了 <span id="busuanzi_value_site_pv"></span> 次~您是第<span id="busuanzi_value_site_uv"></span>个小伙伴
        <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
        document.write(unescape("%3Cspan style='visibility:hidden;' id='cnzz_stat_icon_1255866986'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1255866986%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
        </script>
<div class="copyright">
  
  &copy; &nbsp;  2015 - 
  2016
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Sterne Lee</span>
  <span class="with-love">&spades;</span>
  <span class="author">sternelee@gmail.com</span>
</div>

<div class="powered-by" style="visibility:hidden;">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 強力驱动
</div>

<div class="theme-info" style="visibility:hidden;">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div> 


      </div>
    </div>

    <div class="back-to-top"></div>
  </div>
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.3"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.3"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.3" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.3" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if (isDesktop() && CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    });
  </script>

<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"sternelee"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  


  

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"3","bdPos":"left","bdTop":"250"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>


  

  <script src="/js/jump.js"></script>
  <script>
    $(document).ready(function(){
      $(".site-author-image,.menu-item a").jrumble();
    });
  </script>
  <!-- lazyload -->
  <script type="text/javascript" src="/js/lazyload.js"></script>
      <script type="text/javascript">
        jQuery(function() {          
            jQuery("#posts img").lazyload({
              placeholder:"http://www.arao.me/loading.gif",  
                effect:"fadeIn"
              });
            });
    </script>   
</body>
</html>
